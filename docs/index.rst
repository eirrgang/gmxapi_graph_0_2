=================================
Work specification schema and API
=================================

..  toctree::
    :maxdepth: 2
    :caption: Draft version 4 (2 November 2019)

    intro.rst
    workspec_schema_0_2.rst
    gmxapi.rst

These document drafts are maintained at https://github.com/eirrgang/gmxapi_graph_0_2

Changes in second version
=========================

gmxapi_workspec_0_1 is described in the supplementary information for
`DOI 10.1093/bioinformatics/bty484
<https://doi.org/10.1093/bioinformatics/bty484>`_

Summary of changes proposed to the next document schema and API:

- Node inputs, outputs, and mutable interactions are explicitly named, so that
  typing and binding protocols can be specified by the API without complexity or
  ambiguity in the serialized document.
- Use the term "work graph" instead of "work specification".
  ``gmx.workflow.WorkSpec`` is replaced with an interface for a view to a work graph owned
  by a Context instance.
- Schema version string changes from ``gmxapi_workspec_0_1`` to ``gmxapi_graph_0_2``.
- ``gmx.workflow.WorkElement`` class is replaced with an interface definition
  for an instance of an Operation. Users no longer create objects representing
  work directly.
- Proposed: ``elements`` map name changed to ``nodes``?
- Various API specified operations are moved or renamed.
- User-provided ``name`` properties are replaced with two new properties.

  - ``label`` optionally identifies the entity to the user.
  - ``uid`` is a unique identifier that is deterministically generated by the API.
    ``uid`` completely and verifiably characterize an entity
    (in terms of its inputs and behavior)
    to facilitate
    reproducibility, optimization, and flexibility in graph manipulation.

- Proposed: Serialized work graphs may be bundled, nested as a map of named graphs. By
  convention, the graph named ``default`` would be examined as an entry point.
